import{B as e,E as t,F as n,J as r,K as i,N as a,Z as o,et as s,g as c,h as l,l as u}from"./index-DI_bek77.js";function d(){o({variableName:c(`scrollbar.width`).name})}function f(){r({variableName:c(`scrollbar.width`).name})}var p=l.extend({name:`focustrap-directive`}),m=u.extend({style:p});function h(e){"@babel/helpers - typeof";return h=typeof Symbol==`function`&&typeof Symbol.iterator==`symbol`?function(e){return typeof e}:function(e){return e&&typeof Symbol==`function`&&e.constructor===Symbol&&e!==Symbol.prototype?`symbol`:typeof e},h(e)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]==null?{}:arguments[t];t%2?g(Object(n),!0).forEach(function(t){v(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function v(e,t,n){return(t=y(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){var t=b(e,`string`);return h(t)==`symbol`?t:t+``}function b(e,t){if(h(e)!=`object`||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(h(r)!=`object`)return r;throw TypeError(`@@toPrimitive must return a primitive value.`)}return(t===`string`?String:Number)(e)}var x=m.extend(`focustrap`,{mounted:function(e,t){(t.value||{}).disabled||(this.createHiddenFocusableElements(e,t),this.bind(e,t),this.autoElementFocus(e,t)),e.setAttribute(`data-pd-focustrap`,!0),this.$el=e},updated:function(e,t){(t.value||{}).disabled&&this.unbind(e)},unmounted:function(e){this.unbind(e)},methods:{getComputedSelector:function(e){return`:not(.p-hidden-focusable):not([data-p-hidden-focusable="true"])${e??``}`},bind:function(e,n){var r=this,o=n.value||{},c=o.onFocusIn,l=o.onFocusOut;e.$_pfocustrap_mutationobserver=new MutationObserver(function(n){n.forEach(function(n){if(n.type===`childList`&&!e.contains(document.activeElement)){var o=function(n){var i=a(n)?a(n,r.getComputedSelector(e.$_pfocustrap_focusableselector))?n:s(e,r.getComputedSelector(e.$_pfocustrap_focusableselector)):s(n);return t(i)?i:n.nextSibling&&o(n.nextSibling)};i(o(n.nextSibling))}})}),e.$_pfocustrap_mutationobserver.disconnect(),e.$_pfocustrap_mutationobserver.observe(e,{childList:!0}),e.$_pfocustrap_focusinlistener=function(e){return c&&c(e)},e.$_pfocustrap_focusoutlistener=function(e){return l&&l(e)},e.addEventListener(`focusin`,e.$_pfocustrap_focusinlistener),e.addEventListener(`focusout`,e.$_pfocustrap_focusoutlistener)},unbind:function(e){e.$_pfocustrap_mutationobserver&&e.$_pfocustrap_mutationobserver.disconnect(),e.$_pfocustrap_focusinlistener&&e.removeEventListener(`focusin`,e.$_pfocustrap_focusinlistener)&&(e.$_pfocustrap_focusinlistener=null),e.$_pfocustrap_focusoutlistener&&e.removeEventListener(`focusout`,e.$_pfocustrap_focusoutlistener)&&(e.$_pfocustrap_focusoutlistener=null)},autoFocus:function(e){this.autoElementFocus(this.$el,{value:_(_({},e),{},{autoFocus:!0})})},autoElementFocus:function(e,t){var n=t.value||{},r=n.autoFocusSelector,a=r===void 0?``:r,o=n.firstFocusableSelector,c=o===void 0?``:o,l=n.autoFocus,u=l===void 0?!1:l,d=s(e,`[autofocus]${this.getComputedSelector(a)}`);u&&!d&&(d=s(e,this.getComputedSelector(c))),i(d)},onFirstHiddenElementFocus:function(e){var t,n=e.currentTarget,r=e.relatedTarget,a=r===n.$_pfocustrap_lasthiddenfocusableelement||!((t=this.$el)!=null&&t.contains(r))?s(n.parentElement,this.getComputedSelector(n.$_pfocustrap_focusableselector)):n.$_pfocustrap_lasthiddenfocusableelement;i(a)},onLastHiddenElementFocus:function(e){var t,r=e.currentTarget,a=e.relatedTarget,o=a===r.$_pfocustrap_firsthiddenfocusableelement||!((t=this.$el)!=null&&t.contains(a))?n(r.parentElement,this.getComputedSelector(r.$_pfocustrap_focusableselector)):r.$_pfocustrap_firsthiddenfocusableelement;i(o)},createHiddenFocusableElements:function(t,n){var r=this,i=n.value||{},a=i.tabIndex,o=a===void 0?0:a,s=i.firstFocusableSelector,c=s===void 0?``:s,l=i.lastFocusableSelector,u=l===void 0?``:l,d=function(t){return e(`span`,{class:`p-hidden-accessible p-hidden-focusable`,tabIndex:o,role:`presentation`,"aria-hidden":!0,"data-p-hidden-accessible":!0,"data-p-hidden-focusable":!0,onFocus:t?.bind(r)})},f=d(this.onFirstHiddenElementFocus),p=d(this.onLastHiddenElementFocus);f.$_pfocustrap_lasthiddenfocusableelement=p,f.$_pfocustrap_focusableselector=c,f.setAttribute(`data-pc-section`,`firstfocusableelement`),p.$_pfocustrap_firsthiddenfocusableelement=f,p.$_pfocustrap_focusableselector=u,p.setAttribute(`data-pc-section`,`lastfocusableelement`),t.prepend(f),t.append(p)}}});export{d as n,f as r,x as t};